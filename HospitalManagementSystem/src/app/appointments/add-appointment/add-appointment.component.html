<!-- add-appointment.component.html -->
<mat-card>
  <mat-card-header>
    <h1>Add Appointment</h1>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="addAppointmentForm" (ngSubmit)="addAppointment()" class="example-form">
      <mat-form-field class="example-full-width">
        <mat-label>Patient ID</mat-label>
        <input matInput placeholder="Patient ID" type="number" formControlName="patientId" required />
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Doctor ID</mat-label>
        <input
          matInput
          placeholder="Doctor ID"
          type="number"
          formControlName="doctorId"
          required
          (input)="onDoctorOrDateChange()"
        />
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Choose a date</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          formControlName="date"
          [min]="today"
          [matDatepickerFilter]="dateFilter"
          (dateChange)="onDoctorOrDateChange()"
        />
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <div *ngIf="maxSlots !== null" class="availability-info">
        <small *ngIf="slotFull" class="text-danger">No slots left for the selected day.</small>
        <small *ngIf="!slotFull && slotsLeft !== null">
          {{ slotsLeft }} slot{{ slotsLeft === 1 ? '' : 's' }} left out of {{ maxSlots }}
        </small>
      </div>

      <mat-form-field class="example-full-width">
        <mat-label>Time</mat-label>
        <input matInput type="time" formControlName="time" required />
      </mat-form-field>

      <button mat-flat-button color="primary" type="submit" [disabled]="addAppointmentForm.invalid || slotFull">
        Add
      </button>
      <button mat-flat-button color="warn" type="button" (click)="onCancel()">Cancel</button>
    </form>
  </mat-card-content>
</mat-card>